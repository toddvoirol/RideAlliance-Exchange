<div id="displayGrid">
  <div class="row">
    <div class="form-group">
      <label for="" class="col-sm-6 text-primary size-h4"
        >&nbsp;&nbsp;
        <u>{{ 'ADMIN.HOSPITALITY.TITLE' | translate }}</u> </label
      ><br />
    </div>
  </div>
  <br />
  <br />

  <div class="row">
    <div class="col-lg-4 col-md-4 col-sm-4">
      <div class="form-group">
        <div class="input-group input-group-lg datatable-search-box">
          <span class="input-group-addon">
            <span class="ph ph-magnifying-glass"></span>
          </span>
          <input
            #gb
            type="text"
            class="form-control datatable-search-box"
            pInputText
            size="50"
            placeholder="{{ 'COMMON.SEARCH' | translate }}"
            (input)="onFilterGlobal($event)"
          />
        </div>
      </div>
    </div>
  </div>
  <br />
  <div
    class="ui-widget-header ui-helper-clearfix"
    style="padding: 4px 10px; border-bottom: 0 none"
  ></div>
  <!-- Converted to p-table from p-dataTable -->
  <p-table
    [value]="filteredServiceList"
    class="table table-striped table-hover"
    [rows]="7"
    [paginator]="true"
    [globalFilterFields]="['serviceName']"
    [reorderableColumns]="true"
    sortMode="multiple"
  >
    <ng-template pTemplate="header">
      <tr>
        <!-- Only show columns for properties that exist in your data -->
        <th>{{ 'ADMIN.HOSPITALITY.MEDICAL_CENTER' | translate }}</th>
        <th style="text-align:center">{{ 'ADMIN.HOSPITALITY.ACTIONS' | translate }}</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData>
      <tr>
        <td>{{ rowData.serviceName }}</td>
        <td style="text-align:center">
          <button
            type="button"
            pButton
            icon="ph ph-pencil-simple-line"
            class="btn btn-icon"
            title="{{ 'ADMIN.HOSPITALITY.SHOW_MAP' | translate }}"
            (click)="editHospitality(rowData)"
          ></button>
        </td>
      </tr>
    </ng-template>
  </p-table>
  <br />
  <br />
</div>

<div id="display" style="display: none">
  <form novalidate #hospitalityForm="ngForm">
    <div class="row form-group">
      <label for="" class="col-sm-6 text-primary size-h5"
        >&nbsp;&nbsp;&nbsp;&nbsp;<u>{{ 'ADMIN.HOSPITALITY.MEDICAL_CENTER' | translate }}</u></label
      >
    </div>

    <div class="row map-pad">
      <div class="col-md-6 col-sm-12">
        <div
          class="map-container"
          leaflet
          [leafletOptions]="leafletOptions"
          (leafletMapReady)="onMapReady($event)"
        ></div>
      </div>
      <div class="col-md-6 col-sm-12">
        <div class="form-group row">
          <label class="col-sm-4 col-form-label"
            >{{ 'ADMIN.HOSPITALITY.MEDICAL_CENTER_NAME' | translate }}</label
          >
          <div class="col-sm-8">
            <input
              type="text"
              class="form-control"
              name="serviceName"
              [(ngModel)]="currentHospitality.serviceName"
              (keypress)="omitSpecialChar($event)"
              required
              [disabled]="role !== 'ROLE_ADMIN'"
            />
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-4 col-form-label">{{ 'ADMIN.HOSPITALITY.UPLOAD_GEO_FILE' | translate }}</label>
          <div class="col-sm-8">
            <div class="file-upload-container">
              <i class="ph ph-upload"></i>
              <input
                type="file"
                id="geoFile"
                class="form-control"
                accept=".kml,.geojson,.json"
                (change)="onFileSelected($event)"
                [attr.aria-describedby]="'geoFile-help'"
              />
              <div id="geoFile-help" class="helper-text">
                {{ 'ADMIN.HOSPITALITY.SUPPORTED_FORMATS' | translate }}
              </div>
            </div>
          </div>
        </div>



        <div class="form-group row" *ngIf="role === 'ROLE_ADMIN'">
          <label class="col-sm-4 col-form-label"
            >{{ 'ADMIN.HOSPITALITY.SELECT_PROVIDERS' | translate }}</label
          >
          <div class="col-sm-8">
            <p-multiSelect
              [options]="providers"
              [(ngModel)]="providerList"
              name="providers"
              defaultLabel="{{ 'ADMIN.HOSPITALITY.SELECT_PROVIDERS' | translate }}"
              (onChange)="addProviders($event.value, $event.itemValue)"
            >
            </p-multiSelect>
          </div>
        </div>

        <div class="form-group row text-right">
          <div class="col-sm-12">
            <button class="btn btn-secondary m-1" type="button" (click)="cancelEdit()">
              {{ 'COMMON.CANCEL' | translate }}
            </button>
            <button
              class="btn btn-primary m-1"
              type="button"
              *ngIf="role === 'ROLE_ADMIN'"
              [disabled]="hospitalityForm.invalid"
              (click)="saveHospitality()"
            >
              {{ 'COMMON.SAVE' | translate }}
            </button>
            <button
              class="btn btn-primary m-1"
              type="button"
              *ngIf="role === 'ROLE_PROVIDERADMIN'"
              (click)="mapHospitality()"
            >
              {{ 'ADMIN.HOSPITALITY.MAP_SERVICE_AREA' | translate }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
